{% extends "base.html" %}
{% block content %}
<div class="container">
    <h2 class="section-title">Método Gráfico</h2>

    <form method="post">
        <div style="margin-bottom: 20px;">
            <label><strong>Función Objetivo:</strong></label><br>
            <input type="text" name="objetivo" placeholder="Ej: 3x1+4x2" required style="width: 100%; padding: 10px;">
        </div>

        <div style="margin-bottom: 20px;">
            <label><strong>Tipo de Optimización:</strong></label><br>
            <select name="tipo" style="width: 100%; padding: 10px;">
                <option value="max">Maximizar</option>
                <option value="min">Minimizar</option>
            </select>
        </div>

        <div id="restricciones">
            <h4>Restricciones</h4>
            <div class="restriccion" style="margin-bottom: 10px;">
                <input type="number" step="any" name="a[]" placeholder="Coef. x1" required>
                x₁ +
                <input type="number" step="any" name="b[]" placeholder="Coef. x2" required>
                x₂
                <select name="signo[]">
                    <option value="<=">&le;</option>
                    <option value=">=">&ge;</option>
                    <option value="=">=</option>
                </select>
                <input type="number" step="any" name="rhs[]" placeholder="Valor RHS" required>
            </div>
        </div>
        <button type="button" class="btn" onclick="agregarRestriccion()">+ Añadir Restricción</button><br><br>
        <button type="submit" class="btn">Resolver</button>
    </form>

    {% if resultado %}
        <hr>
        <h3>Resultado</h3>
        <div>{{ resultado|safe }}</div>
    {% endif %}
</div>

<script>
function agregarRestriccion() {
    const container = document.getElementById("restricciones");
    const div = document.createElement("div");
    div.className = "restriccion";
    div.style.marginBottom = "10px";
    div.innerHTML = `
        <input type="number" step="any" name="a[]" placeholder="Coef. x1" required>
        x₁ +
        <input type="number" step="any" name="b[]" placeholder="Coef. x2" required>
        x₂
        <select name="signo[]">
            <option value="<=">&le;</option>
            <option value=">=">&ge;</option>
            <option value="=">=</option>
        </select>
        <input type="number" step="any" name="rhs[]" placeholder="Valor RHS" required>
    `;
    container.appendChild(div);
}
</script>
{% endblock %}
